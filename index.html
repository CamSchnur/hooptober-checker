<html>
    <title>Hooptober X Checker</title>



<body>
    <form id="uploadForm">
        <input type="file" id="csvUpload" accept=".csv" />
        <br/>
        <br/>
        <input type="submit" value="Analyze" />
    </form>

</body>

<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script>
    const uploadForm = document.getElementById("uploadForm");
    const csvList = document.getElementById("csvUpload");

    uploadForm.addEventListener("submit", function (e){
        e.preventDefault();
        const input = csvList.files[0];
        const reader = new FileReader();

        reader.onload = function(e)
        {   
            const originalText = e.target.result;
            //Add better header to the top of the CSV so d3 can more easily parse it.
            //List items are in a format like:  // 1,Cursed,2005,https://boxd.it/1XiY,"some description"
            const betterFormat = "Number,Title,Year,URL,Description\n" + originalText;
            document.write(betterFormat);
            const csvListData = d3.csvParse(betterFormat);

          
            for(var i = 0; i < csvListData.length; i++)
            {
        
                console.log(csvListData[i]);
            }

        }
        reader.readAsText(input);

    });
    
   
</script>
</html>


